<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>How to control Raspberry Pi Fan - Ugur's Personal Documentation</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="A guide on controlling the fan speed on a Raspberry Pi using Python and GPIO pins based on temperature readings."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Ugur's Personal Documentation" rel=home><div class="logo__item logo__text"><div class=logo__title>Ugur's Personal Documentation</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/personal><span class=menu__text>Personal</span></a></li><li class=menu__item><a class=menu__link href=/categories/technical><span class=menu__text>Technical</span></a></li><li class=menu__item><a class=menu__link href=https://photos.ugurelveren.com><i class="fa fa-heart"></i>
<span class=menu__text>Photos</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>How to control Raspberry Pi Fan</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2023-03-22T00:00:00Z>March 22, 2023</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/technical/ rel=category>Technical</a></span></div></div></header><div class="content post__content clearfix"><p>Last week, I did something unplanned: I bought a Raspberry Pi without any specific project in mind. I came across a Mastodon account (@rpilocator@mastodon.social) that helps people locate Raspberry Pis and I decided to get one. And now, here it is! I&rsquo;m writing my first blog post about the Raspberry Pi Fan Control.</p><p>Along with the Raspberry Pi, I purchased a case, some heatsinks, and a fan. My first blog post is about controlling the fan using your own software. I&rsquo;ll be honest, I didn&rsquo;t plan on developing anything at first but decided to give it a try.</p><p>Before we start developing our tiny Python script, we need to install Python and the necessary libraries.</p><pre tabindex=0><code>sudo apt-get update
sudo apt-get install python3-dev python3-pip
sudo pip3 install RPi.GPIO
</code></pre><p>There is one more thing that we need to do. Which is, setting up wires for the fan. I have three wires that I need to connect. Red, black, and blue. It might be different for different fans but in my case red is for power, black is for ground and blue is for the fan&rsquo;s speed.</p><p>I connected GPIO pin 4 for power (red), GPIO pin 6 for ground (black), and the third wire of the fan to GPIO pin 12 (blue) for speed control.</p><p>Now, we need to import the libraries that we will be using:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> RPi.GPIO <span style=color:#66d9ef>as</span> GPIO
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span></code></pre></div><p>In addition, we need to define the GPIO mode and set the output board based on physical pin numbers. Once the output pin is defined, we can initialize PWM on pin 12 with a frequency of 50Hz:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>GPIO<span style=color:#f92672>.</span>setmode(GPIO<span style=color:#f92672>.</span>BOARD)
</span></span><span style=display:flex><span>GPIO<span style=color:#f92672>.</span>setup(<span style=color:#ae81ff>12</span>, GPIO<span style=color:#f92672>.</span>OUT)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fan <span style=color:#f92672>=</span> GPIO<span style=color:#f92672>.</span>PWM(<span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>50</span>)
</span></span></code></pre></div><p>After this step, we need to measure the temperature at certain intervals and adjust the fan speed accordingly. To achieve this, we will create an infinite loop and check the temperature every 5 seconds:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>    temp <span style=color:#f92672>=</span> int(open(<span style=color:#e6db74>&#39;/sys/class/thermal/thermal_zone0/temp&#39;</span>)<span style=color:#f92672>.</span>read()) <span style=color:#f92672>/</span> <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> temp <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>38</span>:
</span></span><span style=display:flex><span>        fan<span style=color:#f92672>.</span>ChangeDutyCycle(<span style=color:#ae81ff>0</span>)  <span style=color:#75715e># Turn off the fan if temperature is below 38C</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>elif</span> temp <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>38</span> <span style=color:#f92672>and</span> temp <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>40</span>:
</span></span><span style=display:flex><span>        fan<span style=color:#f92672>.</span>ChangeDutyCycle(<span style=color:#ae81ff>30</span>) <span style=color:#75715e># Set fan speed to 30% if temperature is between 38C and 40C</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>elif</span> temp <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>40</span> <span style=color:#f92672>and</span> temp <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>43</span>:
</span></span><span style=display:flex><span>        fan<span style=color:#f92672>.</span>ChangeDutyCycle(<span style=color:#ae81ff>50</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>elif</span> temp <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>43</span> <span style=color:#f92672>and</span> temp <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>45</span>:
</span></span><span style=display:flex><span>        fan<span style=color:#f92672>.</span>ChangeDutyCycle(<span style=color:#ae81ff>80</span>)  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        fan<span style=color:#f92672>.</span>ChangeDutyCycle(<span style=color:#ae81ff>100</span>) <span style=color:#75715e># Set fan speed to 100% if temperature is above 45C</span>
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>5</span>) <span style=color:#75715e># Wait for 5 seconds before checking temperature again</span>
</span></span></code></pre></div><p>To run the script, simply enter the command <code>sudo python3 fan.py</code> in the terminal. This will start the infinite loop and the fan will adjust its speed based on the temperature readings.</p><p>If you would like to view the entire script, you can access it from the GitHub Gist that I have created. The link to the Gist is here. Feel free to use the code as a starting point for your own projects, and don&rsquo;t hesitate to reach out if you have any questions or suggestions for improvement.</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 000-6 3 3 0 000 6"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/raspberry-pi/ rel=tag>Raspberry Pi</a></li><li class=tags__item><a class="tags__link btn" href=/tags/fan-control/ rel=tag>fan control</a></li><li class=tags__item><a class="tags__link btn" href=/tags/python/ rel=tag>Python</a></li></ul></div></footer></article></main></div><aside class=sidebar><div class="widget-search widget"><form class=widget-search__form role=search method=get action=https://duckduckgo.com/><input class=widget-search__field type=search placeholder=Search… name=q aria-label=Search…>
<input class=widget-search__submit type=submit value=Search>
<input type=hidden name=sites value=https://blog.ugurelveren.com/></form></div><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/post/monitoring-observability/>Spotting and Fixing Monitoring Smells: A Guide to Reliable Systems</a></li><li class=widget__item><a class=widget__link href=/post/i-have-done-something/>I Moved My Blog to GitHub Again</a></li><li class=widget__item><a class=widget__link href=/post/saga-design-pattern/>Saga Design Pattern: Choreography and Orchestration</a></li><li class=widget__item><a class=widget__link href=/post/dependency-injection/>Dependency Injection</a></li><li class=widget__item><a class=widget__link href=/post/understanding-net-dependency-injection-lifetimes/>Understanding .NET Dependency Injection Lifetimes</a></li><li class=widget__item><a class=widget__link href=/post/ingredient-awareness/>A Casual Exploration of Ingredient Awareness and Global Food Regulations</a></li><li class=widget__item><a class=widget__link href=/post/circuit-breaker-pattern/>Cloud Design Patterns: Circuit Breaker Pattern</a></li><li class=widget__item><a class=widget__link href=/post/cloud-design-patterns/>Cloud Design Patterns</a></li><li class=widget__item><a class=widget__link href=/post/battling-mosquitoes/>Battling Mosquitoes: A Personal Journey</a></li><li class=widget__item><a class=widget__link href=/post/goodbye-hashnode-welcome-writefreely/>Goodbye HashNode, Welcome Writefreely</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/categories/algorithm/>Algorithm</a></li><li class=widget__item><a class=widget__link href=/categories/cloud/>Cloud</a></li><li class=widget__item><a class=widget__link href=/categories/cloud-design-patterns/>Cloud Design Patterns</a></li><li class=widget__item><a class=widget__link href=/categories/devops/>DevOps</a></li><li class=widget__item><a class=widget__link href=/categories/linux/>Linux</a></li><li class=widget__item><a class=widget__link href=/categories/personal/>Personal</a></li><li class=widget__item><a class=widget__link href=/categories/sre/>SRE</a></li><li class=widget__item><a class=widget__link href=/categories/technical/>Technical</a></li></ul></div></div><div class="widget-taglist widget"><h4 class=widget__title>Tags</h4><div class=widget__content><a class="widget-taglist__link widget__link btn" href=/tags/.net/ title=.Net>.Net</a>
<a class="widget-taglist__link widget__link btn" href=/tags/algorithm/ title=Algorithm>Algorithm</a>
<a class="widget-taglist__link widget__link btn" href=/tags/arrays/ title=Arrays>Arrays</a>
<a class="widget-taglist__link widget__link btn" href=/tags/azure-functions/ title="Azure Functions">Azure Functions</a>
<a class="widget-taglist__link widget__link btn" href=/tags/background-services/ title="Background Services">Background Services</a>
<a class="widget-taglist__link widget__link btn" href=/tags/blog/ title=Blog>Blog</a>
<a class="widget-taglist__link widget__link btn" href=/tags/circuit-breaker-pattern/ title="Circuit Breaker Pattern">Circuit Breaker Pattern</a>
<a class="widget-taglist__link widget__link btn" href=/tags/cloud/ title=Cloud>Cloud</a>
<a class="widget-taglist__link widget__link btn" href=/tags/cloud-architecture/ title="Cloud Architecture">Cloud Architecture</a>
<a class="widget-taglist__link widget__link btn" href=/tags/cloud-design-patterns/ title="Cloud Design Patterns">Cloud Design Patterns</a>
<a class="widget-taglist__link widget__link btn" href=/tags/dependency-injection/ title="Dependency Injection">Dependency Injection</a>
<a class="widget-taglist__link widget__link btn" href=/tags/devops/ title=DevOps>DevOps</a>
<a class="widget-taglist__link widget__link btn" href=/tags/fan-control/ title="Fan Control">Fan Control</a>
<a class="widget-taglist__link widget__link btn" href=/tags/food/ title=Food>Food</a>
<a class="widget-taglist__link widget__link btn" href=/tags/food-regulations/ title="Food Regulations">Food Regulations</a>
<a class="widget-taglist__link widget__link btn" href=/tags/github/ title=GitHub>GitHub</a>
<a class="widget-taglist__link widget__link btn" href=/tags/hashnode/ title=Hashnode>Hashnode</a>
<a class="widget-taglist__link widget__link btn" href=/tags/linux/ title=Linux>Linux</a>
<a class="widget-taglist__link widget__link btn" href=/tags/markdown/ title=Markdown>Markdown</a>
<a class="widget-taglist__link widget__link btn" href=/tags/monitoring/ title=Monitoring>Monitoring</a>
<a class="widget-taglist__link widget__link btn" href=/tags/monitoring-smells/ title="Monitoring Smells">Monitoring Smells</a>
<a class="widget-taglist__link widget__link btn" href=/tags/mosquitoes/ title=Mosquitoes>Mosquitoes</a>
<a class="widget-taglist__link widget__link btn" href=/tags/observability/ title=Observability>Observability</a>
<a class="widget-taglist__link widget__link btn" href=/tags/personal-journey/ title="Personal Journey">Personal Journey</a>
<a class="widget-taglist__link widget__link btn" href=/tags/prefix-sum/ title="Prefix Sum">Prefix Sum</a>
<a class="widget-taglist__link widget__link btn" href=/tags/python/ title=Python>Python</a>
<a class="widget-taglist__link widget__link btn" href=/tags/raspberry-pi/ title="Raspberry Pi">Raspberry Pi</a>
<a class="widget-taglist__link widget__link btn" href=/tags/saga-design-pattern/ title="Saga Design Pattern">Saga Design Pattern</a>
<a class="widget-taglist__link widget__link btn" href=/tags/serverless/ title=Serverless>Serverless</a>
<a class="widget-taglist__link widget__link btn" href=/tags/sliding-window/ title="Sliding Window">Sliding Window</a>
<a class="widget-taglist__link widget__link btn" href=/tags/sre/ title=SRE>SRE</a>
<a class="widget-taglist__link widget__link btn" href=/tags/static-website/ title="Static Website">Static Website</a>
<a class="widget-taglist__link widget__link btn" href=/tags/systemd/ title=Systemd>Systemd</a>
<a class="widget-taglist__link widget__link btn" href=/tags/two-pointer/ title="Two Pointer">Two Pointer</a>
<a class="widget-taglist__link widget__link btn" href=/tags/writefreely/ title=Writefreely>Writefreely</a></div></div><div class="widget-social widget"><h4 class="widget-social__title widget__title">Social</h4><div class="widget-social__content widget__content"><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title="My Home Page" rel=me href=https://ugurelveren.com target=_blank><span>My Home Page</span></a></div></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 Ugur's Personal Documentation.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>